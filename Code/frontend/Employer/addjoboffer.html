<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Add Job Offer</title>
</head>
<body>
<h1>Add Job Offer Page</h1>
<form id="jobOfferForm">
    <div class="form-section">
        <label for="jobTitle">Job Title:</label>
        <input type="text" id="jobTitle" name="jobTitle" required>
    </div>

    <div class="form-section">
        <label for="jobLocationType">Job Location Type:</label>
        <select id="jobLocationType" name="jobLocationType" required>
            <option value="">Select Location Type</option>
            <option value="In-person, precise location">In-person, precise location</option>
            <option value="In-person, within a limited area">In-person, within a limited area</option>
            <option value="Fully remote: no on-site work required">Fully remote: no on-site work required</option>
            <option value="Hybrid: some on-site work required">Hybrid: some on-site work required</option>
            <option value="On the road">On the road</option>
        </select>
    </div>

    <div class="form-section">
        <label for="jobType">Job Type:</label>
        <select id="jobType" name="jobType" required>
            <option value="">Select Job Type</option>
            <option value="Full-time">Full-time</option>
            <option value="Part-time">Part-time</option>
            <option value="Contract">Contract</option>
            <option value="Temporary">Temporary</option>
            <option value="Internship">Internship</option>
        </select>
    </div>

    <div class="form-section" id="paySection">
        <label for="payType">Pay Type:</label>
        <select id="payType" name="payType" required>
            <option value="">Select Pay Type</option>
            <option value="Starting amount">Starting amount</option>
            <option value="Maximum amount">Maximum amount</option>
            <option value="Exact amount">Exact amount</option>
        </select>
    
        <div id="payInput">
            <label for="pay">Amount:</label>
            <input type="text" id="pay" name="pay" required>
        </div>
    
        <label for="payFrequency">Pay Frequency:</label>
        <select id="payFrequency" name="payFrequency" required>
            <option value="">Select Pay Frequency</option>
            <option value="per year">per year</option>
            <option value="per month">per month</option>
            <option value="per week">per week</option>
            <option value="per day">per day</option>
            <option value="per hour">per hour</option>
        </select>
    </div>    

    <div class="form-section">
        <label for="jobDescription">Job Description:</label>
        <textarea id="jobDescription" name="jobDescription" required></textarea>
    </div>

    <button type="button" onclick="submitJobOffer()">Submit</button>
</form>

<script>
    async function submitJobOffer() {
        const formData = new FormData(document.getElementById('jobOfferForm'));
        const data = {};
        formData.forEach((value, key) => {
            data[key] = value;
        });
        
        try {
            const response = await fetch('/Employer/addJobOffer', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            });
            
            const result = await response.json();
            if (response.ok) {
                console.log(result.message);
                // Optionally, redirect or display a success message
            } else {
                console.error(result.error);
                // Handle error response
            }
        } catch (error) {
            console.error('Error:', error);
            // Handle network errors
        }
    }
</script>
</body>
</html>